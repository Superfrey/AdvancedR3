---
title: "Draft Quarto document"
author: "Your Name"
format: html
editor:
    markdown: 
      wrap: 72
      canonical: true
---

# Advance learnig task

```{r setup}
#| include: false
knitr::opts_chunk$set(echo = TRUE)

targets::tar_config_set(store = here::here("_targets"))
library(tidyverse)
library(targets)
library(recipes)
lipidomics <- tar_read(lipidomics)
```

## Descriptive results

```{r}
tar_read(df_stats_by_metabolite) %>%
    mutate(MeanSD = glue::glue("{value_mean} ({value_sd})")) %>%
    select(Metabolite = metabolite, "Mean SD" = MeanSD) %>%
    knitr::kable(caption = "Descriptive statistics of the metabolites.")
```

```{r}
tar_read(fig_metabolite_distribution)
```

# Analysis

## Building model

```{r}
log_reg_specs <-  parsnip::logistic_reg() %>% 
    parsnip::set_engine("glm")
```

```{r count}
lipidomics %>% 
    count(code, metabolite) %>% 
    filter( n > 1)
```

# Data and model preparation

## Transforming into wideformat

```{r pivot data to wide format}
lipidomics_wide <- lipidomics %>% 
    column_values_to_snake_case(metabolite) %>% 
    metabolites_to_wide()
```

## define model

predictors, outcome, standardization

Combine everything and the two parts in the input by pipeline seperately

```{r mode workflow combined in one}
model_workflow <- create_model_workflow( 
    parsnip::logistic_reg() %>% 
    parsnip::set_engine("glm"),
    lipidomics_wide %>% 
        create_recipe_spec(metabolite_cholesterol)
    )
```

```{r}

```
