{
  "hash": "b3cc7222284c8890578790454c64d6fe",
  "result": {
    "markdown": "---\ntitle: \"Advanced R course reproduceable workflow\"\nauthor: \n  - name: Jonas Schaarup\n    email: jfrscha@ph.au.dk\n    affiliations:\n      - name: Steno Diabetes Center Aarhus\n        address: Palle Juul-Jensens Boulevard 11\n        city: Aarhus\n        postal-code: 8000\n---\n\n\n# Advance learnig objectives\n\n\n\n\n\n# 6. Descriptive results using targets\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntar_read(df_stats_by_metabolite) %>%\n    mutate(MeanSD = glue::glue(\"{value_mean} ({value_sd})\")) %>%\n    select(Metabolite = metabolite, \"Mean SD\" = MeanSD) %>%\n    knitr::kable(caption = \"Descriptive statistics of the metabolites.\")\n```\n\n::: {.cell-output-display}\nTable: Descriptive statistics of the metabolites.\n\n|Metabolite               |Mean SD      |\n|:------------------------|:------------|\n|CDCl3 (solvent)          |180 (67)     |\n|Cholesterol              |18.6 (11.4)  |\n|FA -CH2CH2COO-           |33.6 (7.8)   |\n|Lipid -CH2-              |536.6 (61.9) |\n|Lipid CH3- 1             |98.3 (73.8)  |\n|Lipid CH3- 2             |168.2 (29.2) |\n|MUFA+PUFA                |32.9 (16.1)  |\n|PUFA                     |30 (24.1)    |\n|Phosphatidycholine       |31.7 (20.5)  |\n|Phosphatidylethanolamine |10 (7.6)     |\n|Phospholipids            |2.7 (2.6)    |\n|TMS (interntal standard) |123 (130.4)  |\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntar_read(fig_metabolite_distribution)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n:::\n\n::: {.cell-output-display}\n![](learning_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n# 7. A general approach to do analysis\n\n## Transforming into wideformat\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlipidomics_wide <- lipidomics %>%\n    column_values_to_snake_case(metabolite) %>%\n    metabolites_to_wide()\n```\n:::\n\n\nPredictors, outcome, standardization...\n\nCombine everything and the two parts in the input by pipeline,\nseparately.\n\n## Run analysis and get estimates!\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncreate_model_workflow(\n    parsnip::logistic_reg() %>%\n        parsnip::set_engine(\"glm\"),\n    lipidomics_wide %>%\n        create_recipe_spec(metabolite_cholesterol)\n) %>%\n    parsnip::fit(lipidomics_wide) %>%\n    tidy_model_output()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 Ã— 5\n  term                   estimate std.error statistic p.value\n  <chr>                     <dbl>     <dbl>     <dbl>   <dbl>\n1 (Intercept)               1.11     1.29      0.0817  0.935 \n2 genderW                   0.493    0.779    -0.907   0.365 \n3 age                       1.01     0.0377    0.183   0.855 \n4 metabolite_cholesterol    2.97     0.458     2.38    0.0175\n```\n:::\n:::\n\n\n# 8. Now fun start: make multiple regression in one go\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodel_estimates <- targets::tar_read(models_estimate_loops)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntargets::tar_read(fig_model_forrest_plot)\n```\n\n::: {.cell-output-display}\n![](learning_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "learning_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}